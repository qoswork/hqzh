<html>

<head>

<title>Test Page for functions.js</title>

<script language="javascript" src="http://localhost:8080/jsunit/app/jsUnitCore.js"></script>
<script language="javascript" src="http://localhost:7080/web/js/functions.js"></script>
<script language="javascript">
/* test to see if it's working */
var pageData;
var widgetProperties;

//function exposeTestFunctionNames(){'setUp','tearDown','testCheckNameExists','testinitializeWidgetProperties'}

function setUp() {
  pageData = new Array();
  widgetProperties = new Array();
  var favoriteportlet = ".dashContent.resourceHealth";
  initializeWidgetProperties(favoriteportlet);
  getWidgetProperties(favoriteportlet);
  getWidgetProperty(favoriteportlet, name);
  setWidgetProperty(favoriteportlet, name, favoriteportlet);
  clearIfAnyChecked("testchecked1");
  hideDiv('visTest');
  showDiv('visTest');
  //clickSelect(form1, "text1", "test"); 
  var testchecked1 = document.getElementById('testchecked1');
  highlight(testchecked1);
  showFormElements();
  hideFormElements();
  //var form = document.forms[0];
//var listofForms = document.getElementsByTagName('form');
//whereAmI(form, listofForms)
var getsecondLi = document.getElementsByTagName('li')[1];
var getallLis = document.getElementsByTagName('li');
whereAmI(getsecondLi, getallLis);


}

function tearDown() {
            atLeastOneTestHasRun = true;
            pageData = "";
            var visTest = document.getElementById('visTest');
            visTest.style.display='none';
            var text1 = document.getElementById('text1');
            text1.value="";
              showFormElements();
        }
     
function testCheckNameExists() {
var name= document.getElementById('nameHead');
assertNotUndefined("Name div exists", name);
inform('name div exists');
}

      
function testinitializeWidgetProperties(){
 assertNotUndefined('doesnt die', pageData);
inform("initializeWidgetProperties doesn't die");
}


function testgetWidgetProperties() {
assertTrue("widget array is not empty", widgetProperties != null);
inform("widgetProperties not null");
}

function testgetWidgetProperty() {
assertEquals("getWidgetProperty is working", name, name);
inform("getWidgetProperty knows the property name");
}

function testsetWidgetProperty() {
assertEquals("getWidgetProperty is working", name, name);
inform("setWidgetProperty knows the property name");
}

function testclearIfAnyChecked() {
var inputChecked = document.getElementById('testchecked1');
assertFalse("not checked", inputChecked.checked);
inform("testchecked1 unchecked");
}

//function testClearText(e) {
// this is an IE only fx, it's clears the events' text
//}

function testhideDiv() {
var hidevisTest = document.getElementById('visTest');
assertTrue("hide div true", hidevisTest.style.display!='none');
inform("seevisTest is hidden");
}

function testshowDiv() {
var showvisTest = document.getElementById('visTest');
assertTrue("hide div true", showvisTest.style.display=='block');
inform("seevisTest is shown");
}

function testtoggleDiv() {
var showvisTest = document.getElementById('visTest');
toggleDiv('visTest');
assertTrue("hide div true", showvisTest.style.display!='block');
inform("seevisTest is now hidden");
inform('current display is block because of previous test');
}

/* function is a duplicate in functions.js - removing it */
/*
function testclickSelect() {
var text1 = document.getElementById('text1');
assertTrue("check value in the input box", test1.value !='');
inform('not an empty value in the input box');
}
*/

function testclickAdd() {
clickAdd('form1');
var checkNewInput = document.getElementsByName('add.x');
assertTrue('check for add.x', checkNewInput !=null);
inform('there is a new input called add.x');
}

function testclickRemove() {
clickRemove('form1', 'one');
var checkNewInputRemoveX = document.getElementsByName('remove.x');
assertTrue('check for remove.x', checkNewInputRemoveX !=null);
inform('there is a new input called remove.x');
}

function testclickAIPlatformImport() {
clickAIPlatformImport('form1');
var checkNewInputImportX = document.getElementsByName('includeForImport.x');
assertTrue('check for includeForImport.x', checkNewInputImportX !=null);
inform('there is a new input called includeForImport.x');
}

function testclickAIPlatformIgnore() {
clickAIPlatformIgnore('form1');
var checkNewInputIgnoreX = document.getElementsByName('ignoreForImport.x');
assertTrue('check for includeForImport.x', checkNewInputIgnoreX !=null);
inform('there is a new input called ignoreForImport.x');
}

function testclickLink() {
 clickLink('form1', 'test', 'get');
 var checkNewInputTestX = document.getElementsByName('test.x');
assertTrue('check for test.x', checkNewInputTestX !=null);
assertTrue('test for form method', document.forms['form1'].method=='get')
inform('the form form1 is now method get');
inform('there is a new input called test.x');
 }
 
 function testgetNumCheckedByClass() {
 var checks = document.forms['form1'];
 var num = getNumCheckedByClass(checks, 'test');
 assertTrue('checking for checked inputs', num > 1);
 inform(' iterating through loop of check boxes');
}

function testgetParent() {
var testchecked1 = document.getElementById('testchecked1');
var parentParentNode = getParent(testchecked1)
assertTrue('checking for checked inputs', parentParentNode.id=='form1');
inform('getting parent.parent node.id == form1');
}

function testgetForm(e) {
var text1 = document.getElementById('text1');
var form = getForm(text1);
assertTrue('checking for form', form.tagName == 'FORM');
inform('checking for form');
}

function testgetDivName (e) {
var testchecked1 = document.getElementById('testchecked1');
var testgetDiv = getDivName(testchecked1);
assertTrue('checking for parent Div', testgetDiv == 'testDiv1');
inform('checking for div of parent element');
}

function testimageSwap() {
 var button1 = document.getElementById('button1');
 var testButtonSwap = imageSwap(button1, button1, '_on')
 var src = button1.src;
 var testStr = src.split('_');
 assertTrue("inform checking btn src", testStr[1] == 'on.gif');
 inform("button src should be changed to button1_on.gif");
 }
 
 function testhighlight() {
 var testchecked1 = document.getElementById('testchecked1');
 highlight(testchecked1);
 var parentN = testchecked1.parentNode.parentNode;
 assertTrue("change parents background color", parentN.style.backgroundColor !='');
  inform("set the forms' background color");
 }
 
 function testunhighlight() {
 var testchecked1 = document.getElementById('testchecked1');
 unhighlight(testchecked1);
 var parentN = testchecked1.parentNode.parentNode;
 assertTrue("change parents background color", parentN.style.backgroundColor !='');
 inform("change the forms' background color");
 }
 
 function testCheck() {
 var testchecked2 = document.getElementById('testchecked2');
 Check(testchecked2);
  assertTrue("check box has a background color", testchecked2.style.backGroundColor !='');
   inform("change a checkboxes' background color");
}

function testClear() {
var testchecked3= document.getElementById('testchecked3');
Clear(testchecked3);
  assertTrue("check box recieves call for color change", testchecked2.style.backGroundColor !='');
   inform("add a background color");
}

function testgetNewImage (iSrc, iW, iH, iB) {
var newImg = getNewImage (iSrc, iW, iH, iB);
assertTrue('trying to make a new img', typeof(newImg) =='object');
inform("creates a new image");
}
/* These two functions cause a window.location change and they break JSUnit */
/*
function testgoToSelectLocation () {
var current = window.location.href;
var select1 = document.getElementById('select1');
var param = goToSelectLocation (select1, 'one', current);
}

function testgoToLocationSelfAndElement(param,elementName,base) {
var changeLoc = goToLocationSelfAndElement(param,elementName,base);
}
*/

function testshowFormElements() {
var text1 = document.getElementById('text1');
assertTrue('form elems visible', text1.style.display !='hidden');
inform("form elems displayed");
} 

function testhideFormElements() {
var text1 = document.getElementById('text1');
assertTrue('form elems hidden', text1.style.display !='visible');
inform("form elems hidden");
}

function testwhereAmI() {
assertTrue('check where in the dom', i == '1');
inform(" found form");
}

function testmoveElementUp() {
var secondLi = document.getElementById('testLi');
var root = document.getElementById('ul');
moveElementUp(secondLi, root);
var allLis = document.getElementsByTagName('li');
	for (var r=0; r<allLis.length; r++) {
		var newOrder = allLis[r].id;
	return newOrder
	}
assertTrue('move the second li up one', newOrder == document.getElementsByTagName('li')[0]);
inform("LI's swapped place");
}

function testmoveElementDown() {
var firstLi = document.getElementById('testLi');
var root = document.getElementById('ul');
moveElementDown(firstLi, root)
var allLis = document.getElementsByTagName('li');
	for (var r=0; r<allLis.length; r++) {
		var newOrder = allLis[r].id;
	return newOrder
	}
assertTrue('move the second li up one', newOrder == document.getElementsByTagName('li')[1]);
inform("LI's swapped place again");
}

/* this fails due to Rico */
/*
function testaccord() {
var accordian = document.getElementById('propertiesAccordion');
accord(null) 
assertTrue('should be visible'. accordian.style.display !='hidden');
}
*/

function testformatWaitTime() {
var formattedTime = formatWaitTime(null, 3700000, 'hours', 'minutes')
assertNotNull('a time is returned', formattedTime);
}
</script>
</head>

<body onload="setUp();">
<FORM id="form1" name="form1">
<input type="text" id="text1" name="text1"></input>
<div id="testDiv1" style="background-color:#ff0000;">
<input type="checkbox" name="testchecked1" checked="checked" id="testchecked1" class='test'>
<input type="checkbox" name="testchecked2" checked="checked" class='test' id="testchecked2">
<input type="checkbox" name="testchecked3"  class='test'  id="testchecked3" >
<input type="checkbox" name="testchecked4" checked="checked" class='test'>
<INPUT TYPE="image" src="button1.gif" value="Hello world!" id='button1' name='button1'>
<select id="select1">
<option selected>California -- CA</option>
<option>Colorado -- CO</option>
<option>Connecticut -- CN</option>
</select>
</div>
<div id="visTest">can you see me?</div>
<div>
<ul id="ul">
<li id=".dashContent.resourceHealth">
<div class="DashboardPadding">
<div class="effectsPortlet">
<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tbody>
<tr>
<td class="BlockTitle">
</td>
<td class="BlockTitle" width="100%" valign="middle">
<div style="cursor: move;"> Favorite Resources </div>
</td>
<td class="BlockTitle" align="right">
</td>
<td class="BlockTitle"></td>
<td class="BlockTitle"></td>
<td class="BlockTitle" align="right">
</td>
<td class="BlockTitle" align="right">
</td>
</tr>
</tbody>
</table>
<script type="text/javascript">
</script>
<table id="favoriteTable" class="portletLRBorder" width="100%" cellspacing="0" cellpadding="0" border="0">
</table>
<table id="noFaveResources" class="portletLRBorder" width="100%" cellspacing="0" cellpadding="0" border="0" style="">
</table>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
</table>
</div>
</div>
</li>
<li id="testLi">test</li>
</ul>
</div>
</form>
<div id="propertiesAccordion" style="display:hidden;"></div>
</body>
</html>



